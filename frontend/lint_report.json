[{"filePath":"C:\\Users\\engan\\OneDrive\\Área de Trabalho\\sigma\\frontend\\src\\App.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\engan\\OneDrive\\Área de Trabalho\\sigma\\frontend\\src\\components\\RoleAssignmentDialog.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchRoles'. Either include it or remove the dependency array.","line":41,"column":6,"nodeType":"ArrayExpression","endLine":41,"endColumn":12,"suggestions":[{"desc":"Update the dependencies array to be: [fetchRoles, open]","fix":{"range":[1101,1107],"text":"[fetchRoles, open]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport {\r\n  Box,\r\n  Button,\r\n  Dialog,\r\n  DialogTitle,\r\n  DialogContent,\r\n  DialogActions,\r\n  FormControl,\r\n  InputLabel,\r\n  Select,\r\n  MenuItem,\r\n  TextField,\r\n  Alert,\r\n  Typography\r\n} from '@mui/material';\r\nimport roleService, { Role } from '../../services/roleService';\r\nimport memberRoleService from '../../services/memberRoleService';\r\nimport { useAuth } from '../../context/AuthContext';\r\n\r\ninterface RoleAssignmentProps {\r\n  memberId: number;\r\n  open: boolean;\r\n  onClose: () => void;\r\n  onSuccess: () => void;\r\n}\r\n\r\nconst RoleAssignmentDialog: React.FC<RoleAssignmentProps> = ({ memberId, open, onClose, onSuccess }) => {\r\n  const { user } = useAuth();\r\n  const [roles, setRoles] = useState<Role[]>([]);\r\n  const [selectedRole, setSelectedRole] = useState<number | ''>('');\r\n  const [startDate, setStartDate] = useState('');\r\n  const [endDate, setEndDate] = useState('');\r\n  const [error, setError] = useState('');\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (open) {\r\n      fetchRoles();\r\n    }\r\n  }, [open]);\r\n\r\n  const fetchRoles = async () => {\r\n    try {\r\n      const allRoles = await roleService.getAll();\r\n      // Filter roles based on current user context (Lodge vs Obedience)\r\n      // If user is Webmaster of a Lodge, only show Lodge roles\r\n      if (user?.lodge_id) {\r\n        setRoles(allRoles.filter(r => r.role_type === 'Loja'));\r\n      } else if (user?.obedience_id) {\r\n        setRoles(allRoles.filter(r => r.role_type === 'Obediência'));\r\n      } else {\r\n        // SuperAdmin or generic context - show all? Or maybe filter by context if passed\r\n        setRoles(allRoles);\r\n      }\r\n    } catch (err) {\r\n      console.error('Error fetching roles:', err);\r\n      setError('Erro ao carregar lista de cargos.');\r\n    }\r\n  };\r\n\r\n  const handleSubmit = async () => {\r\n    if (!selectedRole) {\r\n      setError('Selecione um cargo.');\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    setError('');\r\n\r\n    try {\r\n      await memberRoleService.assignRole(memberId, {\r\n        role_id: Number(selectedRole),\r\n        lodge_id: user?.lodge_id, // Assign to current context\r\n        obedience_id: user?.obedience_id,\r\n        start_date: startDate || undefined,\r\n        end_date: endDate || undefined\r\n      });\r\n      onSuccess();\r\n      onClose();\r\n    } catch (err: any) {\r\n      console.error('Error assigning role:', err);\r\n      setError(err.response?.data?.detail || 'Erro ao atribuir cargo.');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Dialog open={open} onClose={onClose} maxWidth=\"sm\" fullWidth>\r\n      <DialogTitle>Atribuir Cargo</DialogTitle>\r\n      <DialogContent>\r\n        <Box sx={{ mt: 2, display: 'flex', flexDirection: 'column', gap: 2 }}>\r\n          {error && <Alert severity=\"error\">{error}</Alert>}\r\n          \r\n          <Typography variant=\"body2\" color=\"textSecondary\">\r\n            Atribuindo cargo para o membro no contexto atual ({user?.lodge_id ? 'Loja' : 'Obediência'}).\r\n          </Typography>\r\n\r\n          <FormControl fullWidth>\r\n            <InputLabel>Cargo</InputLabel>\r\n            <Select\r\n              value={selectedRole}\r\n              label=\"Cargo\"\r\n              onChange={(e) => setSelectedRole(Number(e.target.value))}\r\n            >\r\n              {roles.map((role) => (\r\n                <MenuItem key={role.id} value={role.id}>\r\n                  {role.name} (Nível {role.level})\r\n                </MenuItem>\r\n              ))}\r\n            </Select>\r\n          </FormControl>\r\n\r\n          <TextField\r\n            label=\"Data de Início\"\r\n            type=\"date\"\r\n            fullWidth\r\n            InputLabelProps={{ shrink: true }}\r\n            value={startDate}\r\n            onChange={(e) => setStartDate(e.target.value)}\r\n          />\r\n\r\n          <TextField\r\n            label=\"Data de Término (Opcional)\"\r\n            type=\"date\"\r\n            fullWidth\r\n            InputLabelProps={{ shrink: true }}\r\n            value={endDate}\r\n            onChange={(e) => setEndDate(e.target.value)}\r\n          />\r\n        </Box>\r\n      </DialogContent>\r\n      <DialogActions>\r\n        <Button onClick={onClose} disabled={loading}>Cancelar</Button>\r\n        <Button onClick={handleSubmit} variant=\"contained\" color=\"primary\" disabled={loading}>\r\n          Salvar\r\n        </Button>\r\n      </DialogActions>\r\n    </Dialog>\r\n  );\r\n};\r\n\r\nexport default RoleAssignmentDialog;\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\engan\\OneDrive\\Área de Trabalho\\sigma\\frontend\\src\\components\\layout\\Footer.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\engan\\OneDrive\\Área de Trabalho\\sigma\\frontend\\src\\components\\layout\\Header.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\engan\\OneDrive\\Área de Trabalho\\sigma\\frontend\\src\\components\\layout\\PublicLayout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\engan\\OneDrive\\Área de Trabalho\\sigma\\frontend\\src\\context\\AuthContext.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Move your React context(s) to a separate file.","line":20,"column":14,"nodeType":"Identifier","messageId":"reactContext","endLine":20,"endColumn":25}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { createContext, useState, ReactNode, useEffect } from 'react';\nimport api from '../services/api';\nimport { jwtDecode } from 'jwt-decode';\n\ninterface Association {\n  id: number;\n  name: string;\n  type: 'lodge' | 'obedience';\n}\n\ninterface AuthContextType {\n  user: any;\n  associations: Association[];\n  requiresSelection: boolean;\n  login: (email: string, pass: string) => Promise<any>;\n  logout: () => void;\n  selectAssociation: (association: Association) => Promise<void>;\n}\n\nexport const AuthContext = createContext<AuthContextType | undefined>(undefined);\n\nexport const AuthProvider = ({ children }: { children: ReactNode }) => {\n  const [user, setUser] = useState<any>(null);\n  const [associations, setAssociations] = useState<Association[]>([]);\n  const [requiresSelection, setRequiresSelection] = useState(false);\n\n  useEffect(() => {\n    const token = localStorage.getItem('token');\n    if (token) {\n      const decodedUser = jwtDecode(token) as any;\n      setUser(decodedUser);\n      if (decodedUser.requires_selection) {\n        setAssociations(decodedUser.associations);\n        setRequiresSelection(true);\n      }\n    }\n  }, []);\n\n  const login = async (email: string, pass: string) => {\n    const params = new URLSearchParams();\n    params.append('username', email);\n    params.append('password', pass);\n\n    const response = await api.post('/auth/login', params, {\n      headers: {\n        'Content-Type': 'application/x-www-form-urlencoded',\n      },\n    });\n    const { access_token } = response.data;\n    localStorage.setItem('token', access_token);\n    const decodedUser = jwtDecode(access_token) as any;\n    setUser(decodedUser);\n\n    if (decodedUser.requires_selection) {\n      setAssociations(decodedUser.associations);\n      setRequiresSelection(true);\n    } else {\n      setRequiresSelection(false);\n      setAssociations([]);\n    }\n    return decodedUser;\n  };\n\n  const selectAssociation = async (association: Association) => {\n    const response = await api.post('/auth/token/select-association', {\n      association_id: association.id,\n      association_type: association.type,\n    });\n    const { access_token } = response.data;\n    localStorage.setItem('token', access_token);\n    const decodedUser = jwtDecode(access_token);\n    setUser(decodedUser);\n    setRequiresSelection(false);\n    setAssociations([]);\n  };\n\n  const logout = () => {\n    localStorage.removeItem('token');\n    setUser(null);\n    setAssociations([]);\n    setRequiresSelection(false);\n  };\n\n  return (\n    <AuthContext.Provider value={{ user, associations, requiresSelection, login, logout, selectAssociation }}>\n      {children}\n    </AuthContext.Provider>\n  );\n};\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\engan\\OneDrive\\Área de Trabalho\\sigma\\frontend\\src\\hooks\\useAuth.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\engan\\OneDrive\\Área de Trabalho\\sigma\\frontend\\src\\hooks\\useCep.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\engan\\OneDrive\\Área de Trabalho\\sigma\\frontend\\src\\hooks\\useTheme.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\engan\\OneDrive\\Área de Trabalho\\sigma\\frontend\\src\\main.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\engan\\OneDrive\\Área de Trabalho\\sigma\\frontend\\src\\pages\\AdministrativeProcessesPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\engan\\OneDrive\\Área de Trabalho\\sigma\\frontend\\src\\pages\\DashboardPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\engan\\OneDrive\\Área de Trabalho\\sigma\\frontend\\src\\pages\\Dashboard\\Dashboard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\engan\\OneDrive\\Área de Trabalho\\sigma\\frontend\\src\\pages\\Dashboard\\DashboardHome.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\engan\\OneDrive\\Área de Trabalho\\sigma\\frontend\\src\\pages\\Dashboard\\DashboardLayout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\engan\\OneDrive\\Área de Trabalho\\sigma\\frontend\\src\\pages\\Dashboard\\LodgeDashboard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\engan\\OneDrive\\Área de Trabalho\\sigma\\frontend\\src\\pages\\Dashboard\\LodgeDashboardLayout.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Footer' is defined but never used.","line":5,"column":8,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":14}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport { Outlet, Link as RouterLink } from 'react-router-dom';\nimport { Box, Drawer, List, ListItem, ListItemButton, ListItemText, Toolbar, CssBaseline } from '@mui/material';\nimport Header from '../../components/layout/Header';\nimport Footer from '../../components/layout/Footer';\n\nconst drawerWidth = 240;\n\nconst navItems = [\n  { text: 'Home', path: '/dashboard/lodge-dashboard' },\n  { text: 'Membros', path: '/dashboard/lodge-dashboard/members' }, // TODO: Update path to actual member management for webmaster\n  { text: 'Sessões', path: '/dashboard/lodge-dashboard/sessions' }, // TODO: Update path to actual session management for webmaster\n];\n\nconst LodgeDashboardLayout: React.FC = () => {\n  return (\n    <Box sx={{ display: 'flex' }}>\n      <CssBaseline />\n      <Header />\n      <Drawer\n        variant=\"permanent\"\n        sx={{\n          width: drawerWidth,\n          flexShrink: 0,\n          [`& .MuiDrawer-paper`]: { width: drawerWidth, boxSizing: 'border-box', top: 'auto' },\n        }}\n      >\n        <Toolbar />\n        <Box sx={{ overflow: 'auto' }}>\n          <List>\n            {navItems.map((item) => (\n              <ListItem key={item.text} disablePadding>\n                <ListItemButton component={RouterLink} to={item.path}>\n                  <ListItemText primary={item.text} />\n                </ListItemButton>\n              </ListItem>\n            ))}\n          </List>\n        </Box>\n      </Drawer>\n      <Box\n        component=\"main\"\n        sx={{ flexGrow: 1, p: 3, width: `calc(100% - ${drawerWidth}px)` }}\n      >\n        <Toolbar />\n        <Outlet />\n      </Box>\n      {/* O Footer pode precisar de um posicionamento diferente dependendo do design final */}\n      {/* <Footer /> */}\n    </Box>\n  );\n};\n\nexport default LodgeDashboardLayout;\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\engan\\OneDrive\\Área de Trabalho\\sigma\\frontend\\src\\pages\\Dashboard\\MemberDashboardLayout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\engan\\OneDrive\\Área de Trabalho\\sigma\\frontend\\src\\pages\\Dashboard\\ObedienceDashboardLayout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\engan\\OneDrive\\Área de Trabalho\\sigma\\frontend\\src\\pages\\Dashboard\\ObedienceDashboardPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\engan\\OneDrive\\Área de Trabalho\\sigma\\frontend\\src\\pages\\Dashboard\\SuperAdminHome.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\engan\\OneDrive\\Área de Trabalho\\sigma\\frontend\\src\\pages\\LandingPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\engan\\OneDrive\\Área de Trabalho\\sigma\\frontend\\src\\pages\\LodgeClassesPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\engan\\OneDrive\\Área de Trabalho\\sigma\\frontend\\src\\pages\\LodgeSelectionPage.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Button' is defined but never used.","line":4,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":16}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport { useAuth } from '../hooks/useAuth';\nimport { useNavigate } from 'react-router-dom';\nimport { Button, Container, Typography, List, ListItem, ListItemText } from '@mui/material';\n\nconst LodgeSelectionPage: React.FC = () => {\n  const { associations, selectAssociation } = useAuth();\n  const navigate = useNavigate();\n\n  const handleSelectAssociation = async (association: any) => {\n    try {\n      await selectAssociation(association);\n      navigate('/dashboard');\n    } catch (error) {\n      console.error('Falha ao selecionar associação', error);\n    }\n  };\n\n  return (\n    <Container>\n      <Typography variant=\"h4\" gutterBottom>\n        Selecione uma Loja ou Obediência\n      </Typography>\n      <List>\n        {associations.map((association) => (\n          <ListItem key={`${association.type}-${association.id}`} button onClick={() => handleSelectAssociation(association)}>\n            <ListItemText primary={association.name} secondary={association.type === 'lodge' ? 'Loja' : 'Obediência'} />\n          </ListItem>\n        ))}\n      </List>\n    </Container>\n  );\n};\n\nexport default LodgeSelectionPage;\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\engan\\OneDrive\\Área de Trabalho\\sigma\\frontend\\src\\pages\\LodgesPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\engan\\OneDrive\\Área de Trabalho\\sigma\\frontend\\src\\pages\\LoginPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\engan\\OneDrive\\Área de Trabalho\\sigma\\frontend\\src\\pages\\Management\\ClassForm.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\engan\\OneDrive\\Área de Trabalho\\sigma\\frontend\\src\\pages\\Management\\Classes.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\engan\\OneDrive\\Área de Trabalho\\sigma\\frontend\\src\\pages\\Management\\DecorationForm.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\engan\\OneDrive\\Área de Trabalho\\sigma\\frontend\\src\\pages\\Management\\FamilyMemberForm.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\engan\\OneDrive\\Área de Trabalho\\sigma\\frontend\\src\\pages\\Management\\LodgeForm.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\engan\\OneDrive\\Área de Trabalho\\sigma\\frontend\\src\\pages\\Management\\LodgeQRCode.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\engan\\OneDrive\\Área de Trabalho\\sigma\\frontend\\src\\pages\\Management\\Lodges.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\engan\\OneDrive\\Área de Trabalho\\sigma\\frontend\\src\\pages\\Management\\MemberForm.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\engan\\OneDrive\\Área de Trabalho\\sigma\\frontend\\src\\pages\\Management\\Members.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\engan\\OneDrive\\Área de Trabalho\\sigma\\frontend\\src\\pages\\Management\\ObedienceForm.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\engan\\OneDrive\\Área de Trabalho\\sigma\\frontend\\src\\pages\\Management\\Obediences.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\engan\\OneDrive\\Área de Trabalho\\sigma\\frontend\\src\\pages\\Management\\RoleHistoryForm.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\engan\\OneDrive\\Área de Trabalho\\sigma\\frontend\\src\\pages\\Management\\SuperAdminForm.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\engan\\OneDrive\\Área de Trabalho\\sigma\\frontend\\src\\pages\\Management\\SuperAdminsManagement.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\engan\\OneDrive\\Área de Trabalho\\sigma\\frontend\\src\\pages\\Management\\WebmasterForm.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'fetchWebmaster' and 'isEditMode'. Either include them or remove the dependency array.","line":59,"column":6,"nodeType":"ArrayExpression","endLine":59,"endColumn":10,"suggestions":[{"desc":"Update the dependencies array to be: [fetchWebmaster, id, isEditMode]","fix":{"range":[1463,1467],"text":"[fetchWebmaster, id, isEditMode]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport {\r\n  Box,\r\n  Typography,\r\n  TextField,\r\n  Button,\r\n  Paper,\r\n  Grid,\r\n  MenuItem,\r\n  FormControl,\r\n  InputLabel,\r\n  Select,\r\n  SelectChangeEvent,\r\n  Alert,\r\n  Snackbar\r\n} from '@mui/material';\r\nimport { useNavigate, useParams } from 'react-router-dom';\r\nimport api from '../../services/api';\r\nimport { validateEmail } from '../../utils/validators';\r\n\r\ninterface Obedience {\r\n  id: number;\r\n  name: string;\r\n}\r\n\r\ninterface Lodge {\r\n  id: number;\r\n  lodge_name: string;\r\n}\r\n\r\nconst WebmasterForm: React.FC = () => {\r\n  const { id } = useParams<{ id: string }>();\r\n  const navigate = useNavigate();\r\n  const isEditMode = !!id;\r\n\r\n  const [formData, setFormData] = useState({\r\n    username: '',\r\n    email: '',\r\n    password: '',\r\n    type: 'obedience', // 'obedience' or 'lodge'\r\n    obedience_id: '',\r\n    lodge_id: '',\r\n    is_active: true\r\n  });\r\n\r\n  const [obediences, setObediences] = useState<Obedience[]>([]);\r\n  const [lodges, setLodges] = useState<Lodge[]>([]);\r\n  const [error, setError] = useState('');\r\n  // ... existing state ...\r\n  const [errors, setErrors] = useState<{ [key: string]: string }>({});\r\n  const [snackbar, setSnackbar] = useState<{ open: boolean; message: string; severity: 'success' | 'error' }>({ open: false, message: '', severity: 'success' });\r\n\r\n  useEffect(() => {\r\n    fetchObediences();\r\n    fetchLodges();\r\n    if (isEditMode) {\r\n      fetchWebmaster();\r\n    }\r\n  }, [id]);\r\n\r\n  const fetchObediences = async () => {\r\n    try {\r\n      const response = await api.get('/obediences/');\r\n      setObediences(response.data);\r\n    } catch (error) {\r\n      console.error('Erro ao buscar obediências:', error);\r\n    }\r\n  };\r\n\r\n  const fetchLodges = async () => {\r\n    try {\r\n      const response = await api.get('/lodges/');\r\n      setLodges(response.data);\r\n    } catch (error) {\r\n      console.error('Erro ao buscar lojas:', error);\r\n    }\r\n  };\r\n\r\n  const fetchWebmaster = async () => {\r\n    try {\r\n      const response = await api.get(`/webmasters/${id}`);\r\n      const data = response.data;\r\n      setFormData({\r\n        username: data.username,\r\n        email: data.email,\r\n        password: '', // Password not retrieved\r\n        type: data.lodge_id ? 'lodge' : 'obedience',\r\n        obedience_id: data.obedience_id || '',\r\n        lodge_id: data.lodge_id || '',\r\n        is_active: data.is_active\r\n      });\r\n    } catch (error) {\r\n      console.error('Erro ao buscar webmaster:', error);\r\n      setError('Erro ao carregar dados do webmaster.');\r\n    }\r\n  };\r\n\r\n  const validateField = (name: string, value: string) => {\r\n    let error = '';\r\n    if (name === 'email' && value && !validateEmail(value)) {\r\n      error = 'Email inválido';\r\n    }\r\n    setErrors((prev) => ({ ...prev, [name]: error }));\r\n    return error === '';\r\n  };\r\n\r\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>) => {\r\n    const { name, value } = e.target;\r\n    \r\n    if (name === 'email') {\r\n      validateField(name, value);\r\n    }\r\n\r\n    setFormData(prev => ({ ...prev, [name]: value }));\r\n  };\r\n\r\n  const handleSelectChange = (e: SelectChangeEvent) => {\r\n    const { name, value } = e.target;\r\n    setFormData(prev => ({ ...prev, [name]: value }));\r\n  };\r\n\r\n  // ...\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    setError('');\r\n\r\n    if (formData.email && !validateEmail(formData.email)) {\r\n      setErrors({ email: 'Email inválido' });\r\n      setSnackbar({ open: true, message: 'Por favor, corrija os erros no formulário.', severity: 'error' });\r\n      return;\r\n    }\r\n\r\n    const payload: any = {\r\n      username: formData.username,\r\n      email: formData.email,\r\n      is_active: formData.is_active,\r\n    };\r\n\r\n    // ... existing payload logic ...\r\n    if (!isEditMode) {\r\n      payload.password = formData.password;\r\n    } else if (formData.password) {\r\n      payload.password = formData.password;\r\n    }\r\n\r\n    if (formData.type === 'obedience') {\r\n      payload.obedience_id = formData.obedience_id ? parseInt(formData.obedience_id) : null;\r\n      payload.lodge_id = null;\r\n    } else {\r\n      payload.lodge_id = formData.lodge_id ? parseInt(formData.lodge_id) : null;\r\n      payload.obedience_id = null;\r\n    }\r\n\r\n    try {\r\n      if (isEditMode) {\r\n        await api.put(`/webmasters/${id}`, payload);\r\n        setSnackbar({ open: true, message: 'Webmaster atualizado com sucesso!', severity: 'success' });\r\n      } else {\r\n        await api.post('/webmasters/', payload);\r\n        setSnackbar({ open: true, message: 'Webmaster criado com sucesso!', severity: 'success' });\r\n      }\r\n      setTimeout(() => navigate('/dashboard/management/webmasters'), 1500);\r\n    } catch (err: any) {\r\n      console.error('Erro ao salvar webmaster:', err);\r\n      setError(err.response?.data?.detail || 'Erro ao salvar webmaster.');\r\n      setSnackbar({ open: true, message: 'Erro ao salvar webmaster.', severity: 'error' });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Box>\r\n      <Typography variant=\"h4\" gutterBottom color=\"primary\">\r\n        {isEditMode ? 'Editar Webmaster' : 'Novo Webmaster'}\r\n      </Typography>\r\n\r\n      {error && <Alert severity=\"error\" sx={{ mb: 2 }}>{error}</Alert>}\r\n      \r\n      <Paper sx={{ p: 4, maxWidth: 600 }}>\r\n        <form onSubmit={handleSubmit}>\r\n          <Grid container spacing={3}>\r\n            <Grid item xs={12}>\r\n              <TextField\r\n                fullWidth\r\n                label=\"Nome de Usuário\"\r\n                name=\"username\"\r\n                value={formData.username}\r\n                onChange={handleChange}\r\n                required\r\n              />\r\n            </Grid>\r\n            <Grid item xs={12}>\r\n              <TextField\r\n                fullWidth\r\n                label=\"Email\"\r\n                name=\"email\"\r\n                type=\"email\"\r\n                value={formData.email}\r\n                onChange={handleChange}\r\n                required\r\n                error={!!errors.email}\r\n                helperText={errors.email}\r\n              />\r\n            </Grid>\r\n            {/* ... other fields ... */}\r\n            <Grid item xs={12}>\r\n              <TextField\r\n                fullWidth\r\n                label={isEditMode ? \"Nova Senha (deixe em branco para manter)\" : \"Senha\"}\r\n                name=\"password\"\r\n                type=\"password\"\r\n                value={formData.password}\r\n                onChange={handleChange}\r\n                required={!isEditMode}\r\n              />\r\n            </Grid>\r\n\r\n            <Grid item xs={12}>\r\n              <FormControl fullWidth>\r\n                <InputLabel>Tipo de Associação</InputLabel>\r\n                <Select\r\n                  name=\"type\"\r\n                  value={formData.type}\r\n                  label=\"Tipo de Associação\"\r\n                  onChange={handleSelectChange}\r\n                >\r\n                  <MenuItem value=\"obedience\">Obediência</MenuItem>\r\n                  <MenuItem value=\"lodge\">Loja</MenuItem>\r\n                </Select>\r\n              </FormControl>\r\n            </Grid>\r\n\r\n            {formData.type === 'obedience' ? (\r\n              <Grid item xs={12}>\r\n                <FormControl fullWidth>\r\n                  <InputLabel>Obediência</InputLabel>\r\n                  <Select\r\n                    name=\"obedience_id\"\r\n                    value={formData.obedience_id}\r\n                    label=\"Obediência\"\r\n                    onChange={handleSelectChange}\r\n                  >\r\n                    {obediences.map((obedience) => (\r\n                      <MenuItem key={obedience.id} value={obedience.id}>\r\n                        {obedience.name}\r\n                      </MenuItem>\r\n                    ))}\r\n                  </Select>\r\n                </FormControl>\r\n              </Grid>\r\n            ) : (\r\n              <Grid item xs={12}>\r\n                <FormControl fullWidth>\r\n                  <InputLabel>Loja</InputLabel>\r\n                  <Select\r\n                    name=\"lodge_id\"\r\n                    value={formData.lodge_id}\r\n                    label=\"Loja\"\r\n                    onChange={handleSelectChange}\r\n                  >\r\n                    {lodges.map((lodge) => (\r\n                      <MenuItem key={lodge.id} value={lodge.id}>\r\n                        {lodge.lodge_name}\r\n                      </MenuItem>\r\n                    ))}\r\n                  </Select>\r\n                </FormControl>\r\n              </Grid>\r\n            )}\r\n\r\n            <Grid item xs={12} sx={{ display: 'flex', gap: 2, justifyContent: 'flex-end' }}>\r\n              <Button onClick={() => navigate('/dashboard/management/webmasters')} variant=\"outlined\">\r\n                Cancelar\r\n              </Button>\r\n              <Button type=\"submit\" variant=\"contained\" color=\"primary\">\r\n                Salvar\r\n              </Button>\r\n            </Grid>\r\n          </Grid>\r\n        </form>\r\n      </Paper>\r\n      <Snackbar\r\n        open={snackbar.open}\r\n        autoHideDuration={6000}\r\n        onClose={() => setSnackbar({ ...snackbar, open: false })}\r\n        anchorOrigin={{ vertical: 'bottom', horizontal: 'center' }}\r\n      >\r\n        <Alert onClose={() => setSnackbar({ ...snackbar, open: false })} severity={snackbar.severity} sx={{ width: '100%' }}>\r\n          {snackbar.message}\r\n        </Alert>\r\n      </Snackbar>\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default WebmasterForm;\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\engan\\OneDrive\\Área de Trabalho\\sigma\\frontend\\src\\pages\\Management\\WebmastersManagement.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\engan\\OneDrive\\Área de Trabalho\\sigma\\frontend\\src\\pages\\MemberDashboardPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\engan\\OneDrive\\Área de Trabalho\\sigma\\frontend\\src\\pages\\MemberRegistryPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\engan\\OneDrive\\Área de Trabalho\\sigma\\frontend\\src\\pages\\PermissionsPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\engan\\OneDrive\\Área de Trabalho\\sigma\\frontend\\src\\pages\\RolesPage.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'RoleUpdate' is defined but never used.","line":30,"column":41,"nodeType":null,"messageId":"unusedVar","endLine":30,"endColumn":51},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchRoles'. Either include it or remove the dependency array.","line":62,"column":6,"nodeType":"ArrayExpression","endLine":62,"endColumn":8,"suggestions":[{"desc":"Update the dependencies array to be: [fetchRoles]","fix":{"range":[1448,1450],"text":"[fetchRoles]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, useState } from 'react';\nimport {\n  Box,\n  Button,\n  Container,\n  Paper,\n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TableHead,\n  TableRow,\n  Typography,\n  IconButton,\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogActions,\n  TextField,\n  MenuItem,\n  FormControl,\n  InputLabel,\n  Select,\n  Chip,\n  Stack,\n  Alert,\n  Snackbar\n} from '@mui/material';\nimport { Edit as EditIcon, Delete as DeleteIcon, Add as AddIcon } from '@mui/icons-material';\nimport roleService, { Role, RoleCreate, RoleUpdate } from '../../services/roleService';\n\nconst RolesPage: React.FC = () => {\n  const [roles, setRoles] = useState<Role[]>([]);\n  const [openDialog, setOpenDialog] = useState(false);\n  const [editingRole, setEditingRole] = useState<Role | null>(null);\n  const [formData, setFormData] = useState<RoleCreate>({\n    name: '',\n    role_type: 'Loja',\n    level: 1,\n    base_credential: 10,\n    applicable_rites: '',\n    permission_ids: []\n  });\n  const [snackbar, setSnackbar] = useState<{ open: boolean; message: string; severity: 'success' | 'error' }>({\n    open: false,\n    message: '',\n    severity: 'success'\n  });\n\n  const fetchRoles = async () => {\n    try {\n      const data = await roleService.getAll();\n      setRoles(data);\n    } catch (error) {\n      console.error('Error fetching roles:', error);\n      showSnackbar('Erro ao carregar cargos', 'error');\n    }\n  };\n\n  useEffect(() => {\n    fetchRoles();\n  }, []);\n\n  const handleOpenDialog = (role?: Role) => {\n    if (role) {\n      setEditingRole(role);\n      setFormData({\n        name: role.name,\n        role_type: role.role_type,\n        level: role.level,\n        base_credential: role.base_credential,\n        applicable_rites: role.applicable_rites || '',\n        permission_ids: role.permissions.map(p => p.id)\n      });\n    } else {\n      setEditingRole(null);\n      setFormData({\n        name: '',\n        role_type: 'Loja',\n        level: 1,\n        base_credential: 10,\n        applicable_rites: '',\n        permission_ids: []\n      });\n    }\n    setOpenDialog(true);\n  };\n\n  const handleCloseDialog = () => {\n    setOpenDialog(false);\n    setEditingRole(null);\n  };\n\n  const handleSubmit = async () => {\n    try {\n      if (editingRole) {\n        await roleService.update(editingRole.id, formData);\n        showSnackbar('Cargo atualizado com sucesso', 'success');\n      } else {\n        await roleService.create(formData);\n        showSnackbar('Cargo criado com sucesso', 'success');\n      }\n      handleCloseDialog();\n      fetchRoles();\n    } catch (error) {\n      console.error('Error saving role:', error);\n      showSnackbar('Erro ao salvar cargo', 'error');\n    }\n  };\n\n  const handleDelete = async (id: number) => {\n    if (window.confirm('Tem certeza que deseja excluir este cargo?')) {\n      try {\n        await roleService.delete(id);\n        showSnackbar('Cargo excluído com sucesso', 'success');\n        fetchRoles();\n      } catch (error) {\n        console.error('Error deleting role:', error);\n        showSnackbar('Erro ao excluir cargo', 'error');\n      }\n    }\n  };\n\n  const showSnackbar = (message: string, severity: 'success' | 'error') => {\n    setSnackbar({ open: true, message, severity });\n  };\n\n  return (\n    <Container maxWidth=\"lg\" sx={{ mt: 4, mb: 4 }}>\n      <Box display=\"flex\" justifyContent=\"space-between\" alignItems=\"center\" mb={3}>\n        <Typography variant=\"h4\" component=\"h1\">\n          Gerenciamento de Cargos\n        </Typography>\n        <Button\n          variant=\"contained\"\n          color=\"primary\"\n          startIcon={<AddIcon />}\n          onClick={() => handleOpenDialog()}\n        >\n          Novo Cargo\n        </Button>\n      </Box>\n\n      <TableContainer component={Paper}>\n        <Table>\n          <TableHead>\n            <TableRow>\n              <TableCell>Nome</TableCell>\n              <TableCell>Tipo (Escopo)</TableCell>\n              <TableCell>Nível</TableCell>\n              <TableCell>Credencial Base</TableCell>\n              <TableCell>Ritos Aplicáveis</TableCell>\n              <TableCell align=\"right\">Ações</TableCell>\n            </TableRow>\n          </TableHead>\n          <TableBody>\n            {roles.map((role) => (\n              <TableRow key={role.id}>\n                <TableCell>{role.name}</TableCell>\n                <TableCell>\n                  <Chip \n                    label={role.role_type} \n                    color={role.role_type === 'Loja' ? 'primary' : role.role_type === 'Obediência' ? 'secondary' : 'default'} \n                    size=\"small\" \n                  />\n                </TableCell>\n                <TableCell>{role.level}</TableCell>\n                <TableCell>{role.base_credential}</TableCell>\n                <TableCell>{role.applicable_rites || '-'}</TableCell>\n                <TableCell align=\"right\">\n                  <IconButton color=\"primary\" onClick={() => handleOpenDialog(role)}>\n                    <EditIcon />\n                  </IconButton>\n                  <IconButton color=\"error\" onClick={() => handleDelete(role.id)}>\n                    <DeleteIcon />\n                  </IconButton>\n                </TableCell>\n              </TableRow>\n            ))}\n          </TableBody>\n        </Table>\n      </TableContainer>\n\n      <Dialog open={openDialog} onClose={handleCloseDialog} maxWidth=\"sm\" fullWidth>\n        <DialogTitle>{editingRole ? 'Editar Cargo' : 'Novo Cargo'}</DialogTitle>\n        <DialogContent>\n          <Box component=\"form\" sx={{ mt: 2, display: 'flex', flexDirection: 'column', gap: 2 }}>\n            <TextField\n              label=\"Nome do Cargo\"\n              fullWidth\n              value={formData.name}\n              onChange={(e) => setFormData({ ...formData, name: e.target.value })}\n            />\n            \n            <FormControl fullWidth>\n              <InputLabel>Tipo (Escopo)</InputLabel>\n              <Select\n                value={formData.role_type}\n                label=\"Tipo (Escopo)\"\n                onChange={(e) => setFormData({ ...formData, role_type: e.target.value as any })}\n              >\n                <MenuItem value=\"Loja\">Loja</MenuItem>\n                <MenuItem value=\"Obediência\">Obediência</MenuItem>\n                <MenuItem value=\"Subobediência\">Subobediência</MenuItem>\n              </Select>\n            </FormControl>\n\n            <Stack direction=\"row\" spacing={2}>\n              <TextField\n                label=\"Nível (1-9)\"\n                type=\"number\"\n                fullWidth\n                inputProps={{ min: 1, max: 9 }}\n                value={formData.level}\n                onChange={(e) => setFormData({ ...formData, level: parseInt(e.target.value) })}\n              />\n              <TextField\n                label=\"Credencial Base\"\n                type=\"number\"\n                fullWidth\n                value={formData.base_credential}\n                onChange={(e) => setFormData({ ...formData, base_credential: parseInt(e.target.value) })}\n              />\n            </Stack>\n\n            <TextField\n              label=\"Ritos Aplicáveis (separados por vírgula)\"\n              fullWidth\n              helperText=\"Ex: REAA,YORK (Deixe em branco para todos)\"\n              value={formData.applicable_rites}\n              onChange={(e) => setFormData({ ...formData, applicable_rites: e.target.value })}\n            />\n          </Box>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={handleCloseDialog}>Cancelar</Button>\n          <Button onClick={handleSubmit} variant=\"contained\" color=\"primary\">\n            Salvar\n          </Button>\n        </DialogActions>\n      </Dialog>\n\n      <Snackbar\n        open={snackbar.open}\n        autoHideDuration={6000}\n        onClose={() => setSnackbar({ ...snackbar, open: false })}\n      >\n        <Alert onClose={() => setSnackbar({ ...snackbar, open: false })} severity={snackbar.severity}>\n          {snackbar.message}\n        </Alert>\n      </Snackbar>\n    </Container>\n  );\n};\n\nexport default RolesPage;\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\engan\\OneDrive\\Área de Trabalho\\sigma\\frontend\\src\\pages\\RolesPermissionsPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\engan\\OneDrive\\Área de Trabalho\\sigma\\frontend\\src\\pages\\Sessions\\SessionDetailsPage.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchSessionDetails'. Either include it or remove the dependency array.","line":75,"column":6,"nodeType":"ArrayExpression","endLine":75,"endColumn":17,"suggestions":[{"desc":"Update the dependencies array to be: [fetchSessionDetails, sessionId]","fix":{"range":[2161,2172],"text":"[fetchSessionDetails, sessionId]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\nimport { useParams } from 'react-router-dom';\nimport { Box, Typography, Paper, Tabs, Tab, CircularProgress, Alert, Button, Stack, Chip, Snackbar } from '@mui/material';\nimport AttendanceTab from './components/AttendanceTab';\nimport { getSessionDetails, startSession, endSession, cancelSession, generateBalaustre, generateEdital } from '../../services/api';\nimport { PlayArrow, Stop, Cancel, Description } from '@mui/icons-material';\n\ninterface Session {\n  id: number;\n  title: string;\n  session_date: string;\n  status: string;\n  lodge: {\n    id: number;\n    lodge_name: string;\n  };\n  documents: any[];\n}\n\ninterface TabPanelProps {\n  children?: React.ReactNode;\n  index: number;\n  value: number;\n}\n\nfunction TabPanel(props: TabPanelProps) {\n  const { children, value, index, ...other } = props;\n\n  return (\n    <div\n      role=\"tabpanel\"\n      hidden={value !== index}\n      id={`simple-tabpanel-${index}`}\n      aria-labelledby={`simple-tab-${index}`}\n      {...other}\n    >\n      {value === index && (\n        <Box sx={{ p: 3 }}>\n          {children}\n        </Box>\n      )}\n    </div>\n  );\n}\n\nconst SessionDetailsPage: React.FC = () => {\n  const { id } = useParams<{ id: string }>();\n  const sessionId = parseInt(id || '0', 10);\n  \n  const [session, setSession] = useState<Session | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [tabValue, setTabValue] = useState(0);\n  const [actionLoading, setActionLoading] = useState(false);\n  const [snackbar, setSnackbar] = useState<{ open: boolean; message: string; severity: 'success' | 'error' }>({ open: false, message: '', severity: 'success' });\n\n  const fetchSessionDetails = async () => {\n    try {\n      setLoading(true);\n      const response = await getSessionDetails(sessionId);\n      setSession(response.data);\n      setError(null);\n    } catch (err) {\n      setError('Falha ao carregar os detalhes da sessão.');\n      console.error(err);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    if (sessionId) {\n      fetchSessionDetails();\n    }\n  }, [sessionId]);\n\n  const handleTabChange = (_event: React.SyntheticEvent, newValue: number) => {\n    setTabValue(newValue);\n  };\n\n  const handleAction = async (action: () => Promise<any>, successMessage: string) => {\n    try {\n      setActionLoading(true);\n      await action();\n      setSnackbar({ open: true, message: successMessage, severity: 'success' });\n      fetchSessionDetails(); // Refresh data\n    } catch (err) {\n      console.error(err);\n      setSnackbar({ open: true, message: 'Falha ao realizar ação.', severity: 'error' });\n    } finally {\n      setActionLoading(false);\n    }\n  };\n\n  const handleCloseSnackbar = () => {\n    setSnackbar({ ...snackbar, open: false });\n  };\n\n  if (loading) {\n    return <CircularProgress />;\n  }\n  \n  if (error) {\n    return <Alert severity=\"error\">{error}</Alert>;\n  }\n\n  if (!session) {\n    return <Typography>Sessão não encontrada.</Typography>;\n  }\n\n  return (\n    <Box sx={{ p: 3 }}>\n      <Paper sx={{ p: 3, mb: 3 }}>\n        <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'flex-start' }}>\n          <Box>\n            <Typography variant=\"h4\" gutterBottom>{session.title}</Typography>\n            <Typography variant=\"h6\" color=\"text.secondary\" gutterBottom>Loja: {session.lodge.lodge_name}</Typography>\n            <Stack direction=\"row\" spacing={2} alignItems=\"center\">\n              <Typography variant=\"body1\">Data: {new Date(session.session_date).toLocaleDateString()}</Typography>\n              <Chip \n                label={session.status} \n                color={session.status === 'EM_ANDAMENTO' ? 'success' : session.status === 'REALIZADA' ? 'primary' : 'default'} \n              />\n            </Stack>\n          </Box>\n          <Box>\n            <Stack direction=\"row\" spacing={1}>\n              {session.status === 'AGENDADA' && (\n                <>\n                  <Button \n                    variant=\"contained\" \n                    color=\"success\" \n                    startIcon={<PlayArrow />}\n                    onClick={() => handleAction(() => startSession(sessionId), 'Sessão iniciada!')}\n                    disabled={actionLoading}\n                  >\n                    Iniciar\n                  </Button>\n                  <Button \n                    variant=\"outlined\" \n                    startIcon={<Description />}\n                    onClick={() => handleAction(() => generateEdital(sessionId), 'Geração de Edital iniciada!')}\n                    disabled={actionLoading}\n                  >\n                    Gerar Edital\n                  </Button>\n                </>\n              )}\n              {session.status === 'EM_ANDAMENTO' && (\n                <Button \n                  variant=\"contained\" \n                  color=\"warning\" \n                  startIcon={<Stop />}\n                  onClick={() => handleAction(() => endSession(sessionId), 'Sessão finalizada!')}\n                  disabled={actionLoading}\n                >\n                  Finalizar\n                </Button>\n              )}\n              {session.status === 'REALIZADA' && (\n                <Button \n                  variant=\"outlined\" \n                  startIcon={<Description />}\n                  onClick={() => handleAction(() => generateBalaustre(sessionId), 'Geração de Balaústre iniciada!')}\n                  disabled={actionLoading}\n                >\n                  Gerar Balaústre\n                </Button>\n              )}\n              {session.status !== 'CANCELADA' && session.status !== 'REALIZADA' && (\n                <Button \n                  variant=\"outlined\" \n                  color=\"error\" \n                  startIcon={<Cancel />}\n                  onClick={() => handleAction(() => cancelSession(sessionId), 'Sessão cancelada!')}\n                  disabled={actionLoading}\n                >\n                  Cancelar\n                </Button>\n              )}\n            </Stack>\n          </Box>\n        </Box>\n      </Paper>\n      \n      <Box sx={{ borderBottom: 1, borderColor: 'divider' }}>\n        <Tabs value={tabValue} onChange={handleTabChange} aria-label=\"session details tabs\">\n          <Tab label=\"Informações Gerais\" />\n          <Tab label=\"Participantes\" />\n          <Tab label=\"Documentos\" />\n        </Tabs>\n      </Box>\n\n      <TabPanel value={tabValue} index={0}>\n        <Typography>Informações detalhadas sobre a sessão serão exibidas aqui.</Typography>\n      </TabPanel>\n      <TabPanel value={tabValue} index={1}>\n        <AttendanceTab sessionId={sessionId} />\n      </TabPanel>\n      <TabPanel value={tabValue} index={2}>\n        {session.documents && session.documents.length > 0 ? (\n          <Stack spacing={2}>\n            {session.documents.map((doc: any) => (\n              <Paper key={doc.id} sx={{ p: 2, display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\n                <Box>\n                  <Typography variant=\"subtitle1\">{doc.title}</Typography>\n                  <Typography variant=\"caption\" color=\"text.secondary\">\n                    Tipo: {doc.document_type} | Data: {new Date(doc.upload_date).toLocaleDateString()}\n                  </Typography>\n                </Box>\n                <Button \n                  variant=\"outlined\" \n                  size=\"small\" \n                  onClick={async () => {\n                    try {\n                      const response = await import('../../services/api').then(m => m.downloadDocument(doc.id));\n                      const url = window.URL.createObjectURL(new Blob([response.data]));\n                      const link = document.createElement('a');\n                      link.href = url;\n                      link.setAttribute('download', doc.file_name);\n                      document.body.appendChild(link);\n                      link.click();\n                      link.remove();\n                    } catch (error) {\n                      console.error('Download failed', error);\n                      setSnackbar({ open: true, message: 'Falha ao baixar documento.', severity: 'error' });\n                    }\n                  }}\n                >\n                  Baixar\n                </Button>\n              </Paper>\n            ))}\n          </Stack>\n        ) : (\n          <Typography color=\"text.secondary\">Nenhum documento gerado para esta sessão.</Typography>\n        )}\n      </TabPanel>\n\n      <Snackbar\n        open={snackbar.open}\n        autoHideDuration={6000}\n        onClose={handleCloseSnackbar}\n        anchorOrigin={{ vertical: 'bottom', horizontal: 'center' }}\n      >\n        <Alert onClose={handleCloseSnackbar} severity={snackbar.severity} sx={{ width: '100%' }}>\n          {snackbar.message}\n        </Alert>\n      </Snackbar>\n    </Box>\n  );\n};\n\nexport default SessionDetailsPage;\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\engan\\OneDrive\\Área de Trabalho\\sigma\\frontend\\src\\pages\\Sessions\\SessionForm.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\engan\\OneDrive\\Área de Trabalho\\sigma\\frontend\\src\\pages\\Sessions\\SessionsPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\engan\\OneDrive\\Área de Trabalho\\sigma\\frontend\\src\\pages\\Sessions\\components\\AttendanceTab.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchAttendance'. Either include it or remove the dependency array.","line":82,"column":6,"nodeType":"ArrayExpression","endLine":82,"endColumn":17,"suggestions":[{"desc":"Update the dependencies array to be: [fetchAttendance, sessionId]","fix":{"range":[2539,2550],"text":"[fetchAttendance, sessionId]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\nimport { \n  Box, Typography, Table, TableBody, TableCell, TableContainer, TableHead, TableRow, Paper, \n  Select, MenuItem, FormControl, SelectChangeEvent, CircularProgress, Alert, Snackbar, \n  Button, Dialog, DialogTitle, DialogContent, DialogActions, TextField, Grid, Divider \n} from '@mui/material';\nimport { Add } from '@mui/icons-material';\nimport { getSessionAttendance, updateManualAttendance, registerVisitorAttendance } from '../../../services/api';\nimport { formatCPF } from '../../../utils/formatters';\nimport { validateCPF, validateEmail } from '../../../utils/validators';\n\n// ...\n\ninterface AttendanceRecord {\n  id: number;\n  member_id: number | null;\n  visitor_id: number | null;\n  member?: {\n    id: number;\n    full_name: string;\n  };\n  visitor?: {\n    id: number;\n    full_name: string;\n    origin_lodge?: string;\n  };\n  attendance_status: string;\n}\n\ninterface AttendanceTabProps {\n  sessionId: number;\n}\n\nconst AttendanceTab: React.FC<AttendanceTabProps> = ({ sessionId }) => {\n  const [attendance, setAttendance] = useState<AttendanceRecord[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [snackbar, setSnackbar] = useState<{ open: boolean; message: string; severity: 'success' | 'error' }>({ open: false, message: '', severity: 'success' });\n  \n  // Visitor Dialog State\n  const [openVisitorDialog, setOpenVisitorDialog] = useState(false);\n  const [visitorData, setVisitorData] = useState({\n    full_name: '',\n    email: '',\n    origin_lodge: '',\n    cpf: ''\n  });\n  const [visitorLoading, setVisitorLoading] = useState(false);\n  const [errors, setErrors] = useState<{ [key: string]: string }>({});\n\n  const validateField = (name: string, value: string) => {\n    let error = '';\n    if (name === 'cpf' && value && !validateCPF(value)) {\n      error = 'CPF inválido';\n    }\n    if (name === 'email' && value && !validateEmail(value)) {\n      error = 'Email inválido';\n    }\n    \n    setErrors((prev) => ({ ...prev, [name]: error }));\n    return error === '';\n  };\n\n  const fetchAttendance = async () => {\n    try {\n      setLoading(true);\n      const response = await getSessionAttendance(sessionId);\n      setAttendance(response.data);\n      setError(null);\n    } catch (err) {\n      setError('Falha ao carregar a lista de presença.');\n      console.error(err);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    if (sessionId) {\n      fetchAttendance();\n    }\n  }, [sessionId]);\n\n  const handleStatusChange = async (memberId: number, newStatus: string) => {\n    try {\n      await updateManualAttendance(sessionId, memberId, newStatus);\n      setSnackbar({ open: true, message: 'Presença atualizada com sucesso!', severity: 'success' });\n      // Refresh local data to show the change\n      setAttendance(prevAttendance =>\n        prevAttendance.map(record =>\n          record.member_id === memberId ? { ...record, attendance_status: newStatus } : record\n        )\n      );\n    } catch (err) {\n      console.error(err);\n      setSnackbar({ open: true, message: 'Falha ao atualizar a presença.', severity: 'error' });\n    }\n  };\n\n  const handleVisitorChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const { name, value } = e.target;\n    let formattedValue = value;\n\n    if (name === 'cpf') {\n      formattedValue = formatCPF(value);\n    }\n\n    validateField(name, formattedValue);\n    setVisitorData({ ...visitorData, [name]: formattedValue });\n  };\n\n  const handleRegisterVisitor = async () => {\n    // Validate all fields before submit\n    const newErrors: { [key: string]: string } = {};\n    if (visitorData.cpf && !validateCPF(visitorData.cpf)) newErrors.cpf = 'CPF inválido';\n    if (visitorData.email && !validateEmail(visitorData.email)) newErrors.email = 'Email inválido';\n\n    if (Object.keys(newErrors).length > 0) {\n      setErrors(newErrors);\n      setSnackbar({ open: true, message: 'Por favor, corrija os erros no formulário.', severity: 'error' });\n      return;\n    }\n\n    try {\n      setVisitorLoading(true);\n      await registerVisitorAttendance(sessionId, visitorData);\n      setSnackbar({ open: true, message: 'Visitante registrado com sucesso!', severity: 'success' });\n      setOpenVisitorDialog(false);\n      setVisitorData({ full_name: '', email: '', origin_lodge: '', cpf: '' });\n      setErrors({}); // Clear errors\n      fetchAttendance(); // Refresh list\n    } catch (err) {\n      console.error(err);\n      setSnackbar({ open: true, message: 'Falha ao registrar visitante.', severity: 'error' });\n    } finally {\n      setVisitorLoading(false);\n    }\n  };\n\n  const handleCloseSnackbar = () => {\n    setSnackbar({ ...snackbar, open: false });\n  };\n\n  if (loading) return <CircularProgress />;\n  if (error) return <Alert severity=\"error\">{error}</Alert>;\n\n  const members = attendance.filter(r => r.member_id !== null);\n  const visitors = attendance.filter(r => r.visitor_id !== null);\n\n  return (\n    <Box>\n      <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', mb: 2 }}>\n        <Typography variant=\"h6\">\n          Membros da Loja\n        </Typography>\n      </Box>\n      <TableContainer component={Paper} sx={{ mb: 4 }}>\n        <Table>\n          <TableHead>\n            <TableRow>\n              <TableCell>Nome do Membro</TableCell>\n              <TableCell sx={{ width: '200px' }}>Status da Presença</TableCell>\n            </TableRow>\n          </TableHead>\n          <TableBody>\n            {members.map((record) => (\n              <TableRow key={record.id}>\n                <TableCell>{record.member?.full_name}</TableCell>\n                <TableCell>\n                  <FormControl size=\"small\" fullWidth>\n                    <Select\n                      value={record.attendance_status}\n                      onChange={(e: SelectChangeEvent) => record.member_id && handleStatusChange(record.member_id, e.target.value)}\n                    >\n                      <MenuItem value=\"Presente\">Presente</MenuItem>\n                      <MenuItem value=\"Ausente\">Ausente</MenuItem>\n                      <MenuItem value=\"Justificado\">Justificado</MenuItem>\n                    </Select>\n                  </FormControl>\n                </TableCell>\n              </TableRow>\n            ))}\n            {members.length === 0 && (\n              <TableRow>\n                <TableCell colSpan={2} align=\"center\">Nenhum membro listado.</TableCell>\n              </TableRow>\n            )}\n          </TableBody>\n        </Table>\n      </TableContainer>\n\n      <Divider sx={{ my: 4 }} />\n\n      <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', mb: 2 }}>\n        <Typography variant=\"h6\">\n          Visitantes\n        </Typography>\n        <Button \n          variant=\"contained\" \n          startIcon={<Add />} \n          onClick={() => setOpenVisitorDialog(true)}\n        >\n          Registrar Visitante\n        </Button>\n      </Box>\n      <TableContainer component={Paper}>\n        <Table>\n          <TableHead>\n            <TableRow>\n              <TableCell>Nome do Visitante</TableCell>\n              <TableCell>Loja de Origem</TableCell>\n              <TableCell>Status</TableCell>\n            </TableRow>\n          </TableHead>\n          <TableBody>\n            {visitors.map((record) => (\n              <TableRow key={record.id}>\n                <TableCell>{record.visitor?.full_name}</TableCell>\n                <TableCell>{record.visitor?.origin_lodge || '-'}</TableCell>\n                <TableCell>{record.attendance_status}</TableCell>\n              </TableRow>\n            ))}\n            {visitors.length === 0 && (\n              <TableRow>\n                <TableCell colSpan={3} align=\"center\">Nenhum visitante registrado.</TableCell>\n              </TableRow>\n            )}\n          </TableBody>\n        </Table>\n      </TableContainer>\n\n      {/* Visitor Dialog */}\n      <Dialog open={openVisitorDialog} onClose={() => setOpenVisitorDialog(false)}>\n        <DialogTitle>Registrar Visitante</DialogTitle>\n        <DialogContent>\n          <Grid container spacing={2} sx={{ mt: 1 }}>\n            <Grid item xs={12}>\n              <TextField\n                name=\"full_name\"\n                label=\"Nome Completo\"\n                fullWidth\n                required\n                value={visitorData.full_name}\n                onChange={handleVisitorChange}\n              />\n            </Grid>\n            <Grid item xs={12}>\n              <TextField\n                name=\"origin_lodge\"\n                label=\"Loja de Origem\"\n                fullWidth\n                value={visitorData.origin_lodge}\n                onChange={handleVisitorChange}\n              />\n            </Grid>\n            <Grid item xs={12}>\n              <TextField\n                name=\"email\"\n                label=\"Email (Opcional)\"\n                fullWidth\n                type=\"email\"\n                value={visitorData.email}\n                onChange={handleVisitorChange}\n                error={!!errors.email}\n                helperText={errors.email}\n              />\n            </Grid>\n            <Grid item xs={12}>\n              <TextField\n                name=\"cpf\"\n                label=\"CPF (Opcional)\"\n                fullWidth\n                value={visitorData.cpf}\n                onChange={handleVisitorChange}\n                error={!!errors.cpf}\n                helperText={errors.cpf}\n              />\n            </Grid>\n          </Grid>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={() => setOpenVisitorDialog(false)}>Cancelar</Button>\n          <Button \n            onClick={handleRegisterVisitor} \n            variant=\"contained\" \n            disabled={visitorLoading || !visitorData.full_name}\n          >\n            {visitorLoading ? <CircularProgress size={24} /> : 'Registrar'}\n          </Button>\n        </DialogActions>\n      </Dialog>\n\n      <Snackbar\n        open={snackbar.open}\n        autoHideDuration={6000}\n        onClose={handleCloseSnackbar}\n        anchorOrigin={{ vertical: 'bottom', horizontal: 'center' }}\n      >\n        <Alert onClose={handleCloseSnackbar} severity={snackbar.severity} sx={{ width: '100%' }}>\n          {snackbar.message}\n        </Alert>\n      </Snackbar>\n    </Box>\n  );\n};\n\nexport default AttendanceTab;\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\engan\\OneDrive\\Área de Trabalho\\sigma\\frontend\\src\\pages\\WebmasterDashboardPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\engan\\OneDrive\\Área de Trabalho\\sigma\\frontend\\src\\pages\\WebmasterRoleAssignmentPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\engan\\OneDrive\\Área de Trabalho\\sigma\\frontend\\src\\router.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\engan\\OneDrive\\Área de Trabalho\\sigma\\frontend\\src\\services\\api.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\engan\\OneDrive\\Área de Trabalho\\sigma\\frontend\\src\\services\\memberRoleService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\engan\\OneDrive\\Área de Trabalho\\sigma\\frontend\\src\\services\\roleService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\engan\\OneDrive\\Área de Trabalho\\sigma\\frontend\\src\\theme.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\engan\\OneDrive\\Área de Trabalho\\sigma\\frontend\\src\\types\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\engan\\OneDrive\\Área de Trabalho\\sigma\\frontend\\src\\utils\\errorTranslator.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\engan\\OneDrive\\Área de Trabalho\\sigma\\frontend\\src\\utils\\formatters.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\engan\\OneDrive\\Área de Trabalho\\sigma\\frontend\\src\\utils\\validators.ts","messages":[{"ruleId":"prefer-const","severity":2,"message":"'digitos' is never reassigned. Use 'const' instead.","line":25,"column":7,"nodeType":"Identifier","messageId":"useConst","endLine":25,"endColumn":14,"fix":{"range":[674,712],"text":"const digitos = cnpj.substring(tamanho);"}}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":1,"fixableWarningCount":0,"source":"export const validateCNPJ = (cnpj: string): boolean => {\r\n  cnpj = cnpj.replace(/[^\\d]+/g, '');\r\n\r\n  if (cnpj == '') return false;\r\n  if (cnpj.length != 14) return false;\r\n\r\n  // Elimina CNPJs invalidos conhecidos\r\n  if (\r\n    cnpj == \"00000000000000\" ||\r\n    cnpj == \"11111111111111\" ||\r\n    cnpj == \"22222222222222\" ||\r\n    cnpj == \"33333333333333\" ||\r\n    cnpj == \"44444444444444\" ||\r\n    cnpj == \"55555555555555\" ||\r\n    cnpj == \"66666666666666\" ||\r\n    cnpj == \"77777777777777\" ||\r\n    cnpj == \"88888888888888\" ||\r\n    cnpj == \"99999999999999\"\r\n  )\r\n    return false;\r\n\r\n  // Valida DVs\r\n  let tamanho = cnpj.length - 2;\r\n  let numeros = cnpj.substring(0, tamanho);\r\n  let digitos = cnpj.substring(tamanho);\r\n  let soma = 0;\r\n  let pos = tamanho - 7;\r\n  for (let i = tamanho; i >= 1; i--) {\r\n    soma += parseInt(numeros.charAt(tamanho - i)) * pos--;\r\n    if (pos < 2) pos = 9;\r\n  }\r\n  let resultado = soma % 11 < 2 ? 0 : 11 - (soma % 11);\r\n  if (resultado != parseInt(digitos.charAt(0))) return false;\r\n\r\n  tamanho = tamanho + 1;\r\n  numeros = cnpj.substring(0, tamanho);\r\n  soma = 0;\r\n  pos = tamanho - 7;\r\n  for (let i = tamanho; i >= 1; i--) {\r\n    soma += parseInt(numeros.charAt(tamanho - i)) * pos--;\r\n    if (pos < 2) pos = 9;\r\n  }\r\n  resultado = soma % 11 < 2 ? 0 : 11 - (soma % 11);\r\n  if (resultado != parseInt(digitos.charAt(1))) return false;\r\n\r\n  return true;\r\n};\r\n\r\nexport const validateCPF = (cpf: string): boolean => {\r\n  cpf = cpf.replace(/[^\\d]+/g, '');\r\n  if (cpf == '') return false;\r\n  // Elimina CPFs invalidos conhecidos\r\n  if (\r\n    cpf.length != 11 ||\r\n    cpf == \"00000000000\" ||\r\n    cpf == \"11111111111\" ||\r\n    cpf == \"22222222222\" ||\r\n    cpf == \"33333333333\" ||\r\n    cpf == \"44444444444\" ||\r\n    cpf == \"55555555555\" ||\r\n    cpf == \"66666666666\" ||\r\n    cpf == \"77777777777\" ||\r\n    cpf == \"88888888888\" ||\r\n    cpf == \"99999999999\"\r\n  )\r\n    return false;\r\n  // Valida 1o digito\r\n  let add = 0;\r\n  for (let i = 0; i < 9; i++) add += parseInt(cpf.charAt(i)) * (10 - i);\r\n  let rev = 11 - (add % 11);\r\n  if (rev == 10 || rev == 11) rev = 0;\r\n  if (rev != parseInt(cpf.charAt(9))) return false;\r\n  // Valida 2o digito\r\n  add = 0;\r\n  for (let i = 0; i < 10; i++) add += parseInt(cpf.charAt(i)) * (11 - i);\r\n  rev = 11 - (add % 11);\r\n  if (rev == 10 || rev == 11) rev = 0;\r\n  if (rev != parseInt(cpf.charAt(10))) return false;\r\n  return true;\r\n};\r\n\r\nexport const validateEmail = (email: string): boolean => {\r\n  const re = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\r\n  return re.test(email);\r\n};\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\engan\\OneDrive\\Área de Trabalho\\sigma\\frontend\\src\\vite-env.d.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]}]
